<CardDisplay>:
    canvas:
        Color: 
            rgba: root.color
        Rectangle:
            texture: app.deck_texture and app.get_texture(root.card)
            size: min(root.size[0], root.size[1] * 5 / 7), min(root.size[1], root.size[0] * 7 / 5)
            pos: root.pos[0] + (root.size[0] - self.size[0]) / 2, root.pos[1]
    on_card: root.canvas.ask_update()
    on_color: root.canvas.ask_update()


<SuitDisplay>:
    canvas:
        Rectangle:
            texture: app.deck_texture and app.get_suit_texture(root.suit)
            pos: self.pos[0], self.pos[1] + (self.size[1] - min(self.size[0], self.size[1])) / 2
            size: min(self.size[0], self.size[1]), min(self.size[0], self.size[1])


<SuitScoreDisplay>:
    SuitDisplay:
        suit: root.suit
    Label:
        text: str(root.pscore)
    ProgressBar:
        max: max(root.pscore, 0) + max(root.dscore, 0)
        value: root.pscore
    Label:
        text: str(root.dscore)


<RoundCounter>:
    text: "Round %s of %s" % (root.round_number, root.max_round)


<ToolTipDisplay>:
    orientation: "vertical"
    ProgressBar:
        value: 0
        size_hint: 1, .2
    CardDisplay:
        card: root.card
        pos: root.pos[0] + (root.size[0] - self.size[0]) / 2, root.pos[1]
    Label:
        text: root.card and "[b]%s[/b]" % root.card.name
        text_size: self.size
        markup: True
        size_hint: 1, .25
    ScrollView:
        do_scroll_x: False
        Label:
            text: root.card and root.card.description
            text_size: self.parent.size[0], self.text_size[1]
            font_size: dp(12)
            size_hint: 1, None
            

<AchievementDisplay>:
    orientation: "vertical"
    Widget:
    BoxLayout:
        Widget:
            canvas:
                Rectangle:
                    texture: app.get_achievement_texture(root.achievement)
                    size: min(self.size[0], self.size[1]), min(self.size[1], self.size[0])
                    pos: self.pos[0], self.pos[1]
        BoxLayout:
            orientation: "vertical"
            Label:
                text: "[b]Congratulations![/b]"
                markup: True
                text_size: self.size
                size_hint: (1, .25)
            Label:
                text: "[b]%s[/b]" % root.achievement.name
                text_size: self.size
                markup: True
                size_hint: (1, .25)
            Label:
                text: root.achievement.description
                text_size: self.size
    Widget:


<UnlockDisplay>:
    BoxLayout:
        orientation: "vertical"
        Label:
            text: "[b]Congratulations![/b]"
            markup: True
            text_size: self.size
            size_hint: (1, .25)
        Widget:
            canvas:
                Rectangle:
                    texture: app.get_achievement_texture(root.achievement)
                    size: min(self.size[0], self.size[1]), min(self.size[1], self.size[0])
                    pos: self.pos[0], self.pos[1]
        Label:
            text: "[b]%s[/b]" % root.achievement.name
            text_size: self.size
            markup: True
            size_hint: (1, .25)
        Label:
            text: root.achievement.description
            text_size: self.size
    BoxLayout:
        orientation: "vertical"
        size_hint: (2, 1)
        Label:
            text: "You have UNLOCKED:"
            size_hint: (1, .25)
        BoxLayout:
            CardDisplay:
                card: root.reward
            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "[b]%s[/b]" % root.reward.name if root.reward is not None else ""
                    text_size: self.size
                    markup: True
                    size_hint: (1, .25)
                Label:
                    text: root.reward.description if root.reward is not None else ""
                    text_size: self.size


<WinnerScreen>:
    BoxLayout:
        orientation: "vertical"
        Carousel:
            id: carousel
            direction: "right"
            size_hint: (1, 3)
        Label:
            text: "Play Again?"
        BoxLayout:
            Button:
                text: "YES"
                on_press: root.manager.play_again()
            Button:
                text: "no"
                on_press: app.stop()


<WinIntroScreen@Screen>:
    Carousel:
        BoxLayout:
            orientation: "vertical"
            FinalScoreDisplay:
                score: root.game and root.game.scoreboard
            ProgressBar:
                max: 0
            BoxLayout:
                Widget:
                Button:
                    text: "CONTINUE"
                Widget:
        BoxLayout:
            orientation: "vertical"
            UnlockDisplay:
                achievement: root.achievement
                reward: root.achievement.reward
            ProgressBar:
                max: 0
            Label:
                text: "swipe left"


<TutorialDisplay@BoxLayout>:
    title: ""
    text: ""
    footer: ""
    orientation: "vertical"
    Label:
        text: "[b]" + root.title + "[/b]"
        halign: "center"
        valign: "middle"
        markup: True
        text_size: self.size
        size_hint: (1, .1)
    Label:
        text: root.text
        valign: "top"
        size_hint: (1, .7)
        text_size: self.size
    Label:
        text: "[b]" + root.footer + "[/b]"
        valign: "middle"
        markup: True
        text_size: self.size
        size_hint: (1, .08)