## Components - gui/components.py ##

<CardDisplay>:
    canvas:
        Color: 
            rgba: root.color
        Rectangle:
            texture: app.deck_texture and app.get_texture(root.card)
            size: min(root.size[0], root.size[1] * 5 / 7), min(root.size[1], root.size[0] * 7 / 5)
            pos: root.pos[0] + (root.size[0] - self.size[0]) / 2, root.pos[1]
        Rectangle:
            texture: app.deck_texture and app.get_texture("WAIT" if root.waited else None)
            size: min(root.size[0], root.size[1] * 5 / 7), min(root.size[1], root.size[0] * 7 / 5)
            pos: root.pos[0] + (root.size[0] - self.size[0]) / 2, root.pos[1]
    on_card: root.canvas.ask_update()
    on_color: root.canvas.ask_update()


<SuitDisplay>:
    canvas:
        Rectangle:
            texture: app.deck_texture and app.get_suit_texture(root.suit)
            pos: self.pos[0], self.pos[1] + (self.size[1] - min(self.size[0], self.size[1])) / 2
            size: min(self.size[0], self.size[1]), min(self.size[0], self.size[1])


<SuitScoreDisplay>:
    SuitDisplay:
        suit: root.suit
    Label:
        text: str(root.pscore)
    ProgressBar:
        max: max(root.pscore, 0) + max(root.dscore, 0)
        value: root.pscore
    Label:
        text: str(root.dscore)


<RoundCounter>:
    text: "Round %s of %s" % (root.round_number, root.max_round)


<ToolTipDisplay>:
    orientation: "vertical"
    ProgressBar:
        value: 0
        size_hint: 1, .2
    CardDisplay:
        card: root.card
        pos: root.pos[0] + (root.size[0] - self.size[0]) / 2, root.pos[1]
    Label:
        text: root.card and "[b]%s[/b]" % root.card.name
        text_size: self.size
        markup: True
        size_hint: 1, .25
    ScrollView:
        do_scroll_x: False
        Label:
            text: root.card and root.card.description
            text_size: self.parent.size[0], self.text_size[1]
            font_size: dp(12)
            size_hint: 1, None


## Deck Catalog - gui/screens/deck.py ##

<DeckDisplay>:
    orientation: "vertical"
    canvas:
        Color:
            rgba: root.get_shading(root.purchased)
    BoxLayout:
        size_hint: (1, 7)
        Widget:
        ToolTipDisplay:
            card: root.deck
        Widget:
    BoxLayout:
        Widget:
        Button:
            text: "Play With" if root.purchased else "Purchase"
            on_release: root.clicked()
        Widget:


## Win Screens - gui/screens/game.py ##            

<AchievementEarnedDisplay>:
    orientation: "vertical"
    Widget:
    BoxLayout:
        Widget:
            canvas:
                Rectangle:
                    texture: app.get_achievement_texture(root.achievement)
                    size: min(self.size[0], self.size[1]), min(self.size[1], self.size[0])
                    pos: self.pos[0], self.pos[1]
        BoxLayout:
            orientation: "vertical"
            Label:
                text: "[b]Congratulations![/b]"
                markup: True
                text_size: self.size
                size_hint: (1, .25)
            Label:
                text: "[b]%s[/b]" % root.achievement.name
                text_size: self.size
                markup: True
                size_hint: (1, .25)
            Label:
                text: root.achievement.description
                text_size: self.size
    Widget:


<UnlockDisplay>:
    BoxLayout:
        orientation: "vertical"
        Label:
            text: "[b]Congratulations![/b]"
            markup: True
            text_size: self.size
            size_hint: (1, .25)
        Widget:
            canvas:
                Rectangle:
                    texture: app.get_achievement_texture(root.achievement)
                    size: min(self.size[0], self.size[1]), min(self.size[1], self.size[0])
                    pos: self.pos[0], self.pos[1]
        Label:
            text: "[b]%s[/b]" % root.achievement.name
            text_size: self.size
            markup: True
            size_hint: (1, .25)
        Label:
            text: root.achievement.description
            text_size: self.size
    BoxLayout:
        orientation: "vertical"
        size_hint: (2, 1)
        Label:
            text: "You have UNLOCKED:"
            size_hint: (1, .25)
        BoxLayout:
            CardDisplay:
                card: root.reward
            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "[b]%s[/b]" % root.reward.name if root.reward is not None else ""
                    text_size: self.size
                    markup: True
                    size_hint: (1, .25)
                Label:
                    text: root.reward.description if root.reward is not None else ""
                    text_size: self.size


<DealerDisplay>:
    canvas:
        Rectangle:
            texture: app.get_dealer_texture(*root.get_dealer())
            size: min(self.size[0], self.size[1]), min(self.size[0], self.size[1])
            pos: self.pos[0] + (root.size[0] - self.size[0]) / 2, self.pos[1]


<WinnerScreen>:
    BoxLayout:
        orientation: "vertical"
        Carousel:
            id: carousel
            direction: "right"
            size_hint: (1, 3)
        Label:
            text: "Play Again?"
        BoxLayout:
            Button:
                text: "YES"
                on_press: root.manager.play_again()
            Button:
                text: "no"
                on_press: root.manager.switcher('home')


## Tutorial Screens - gui/screens/tutorial.py ##

<WinIntroScreen@Screen>:
    Carousel:
        BoxLayout:
            orientation: "vertical"
            FinalScoreDisplay:
                score: root.game and root.game.scoreboard
            ProgressBar:
                max: 0
            BoxLayout:
                Widget:
                Button:
                    text: "CONTINUE"
                Widget:
        BoxLayout:
            orientation: "vertical"
            UnlockDisplay:
                achievement: root.achievement
                reward: root.achievement.reward
            ProgressBar:
                max: 0
            Label:
                text: "swipe left"


<TutorialDisplay@BoxLayout>:
    title: ""
    text: ""
    footer: ""
    orientation: "vertical"
    Label:
        text: "[b]" + root.title + "[/b]"
        halign: "center"
        valign: "middle"
        markup: True
        text_size: self.size
        size_hint: (1, .1)
    Label:
        text: root.text
        valign: "top"
        size_hint: (1, .7)
        text_size: self.size
    Label:
        text: "[b]" + root.footer + "[/b]"
        valign: "middle"
        markup: True
        text_size: self.size
        size_hint: (1, .08)


## Settings - gui/settings.py ##

<SliderPopup>:
    size_hint: (None, None)
    BoxLayout:
        orientation: "vertical"
        spacing: dp(5) 
        Widget:
        BoxLayout:
            Slider:
                id: slider
                min: 0.001
                max: 3.0
                value: root.value
                size_hint_y: None
                height: '42sp'
            Label:
                text: str(round(slider.value, 2))
        Widget:
        SettingSpacer:
        BoxLayout:
            size_hint_y: None
            height: dp(50)
            spacing: dp(5)
            Button:
                text: "Ok"
                on_release: root.setting._validate()
            Button:
                text: "Cancel"
                on_release: root.setting._dismiss()


## Home Screen - gui/screens/home.py ##

<HomeScreen>:
    BoxLayout:
        orientation: "vertical"
        Button:
            size_hint: 1, 5
            text: "PLAY"
            margin: dp(300), dp(500)
            on_release: root.manager.switcher('main')
        BoxLayout:
            Label:
                text: "0 winks"
            Label:
                text: "0 kisses"
            Button:
                text: "Achievements"
                on_release: root.manager.switcher('achieve')
            Button:
                text: "Decks"
                on_release: root.manager.switcher('decks')
            Button:
                text: "Settings"
                on_release: root.manager.switcher('settings')
            Button:
                text: "Help"


## Achievement Screen - gui/screens/achievement.py ##            

<AchievementDisplay>:
    size_hint: (1, None)
    canvas:
        Color:
            rgba: root.get_backdrop(self.earned)
        Rectangle:
            size: root.size
            pos: root.pos
            
    Widget:
        canvas:
            Color:
                rgba: root.get_shading(root.earned)
            Rectangle:
                texture: app.achievement_texture and app.get_achievement_texture(root.achievement)
                size: min(self.size[0], self.size[1]), min(self.size[1], self.size[0])
                pos: self.pos[0], self.pos[1]
        size_hint_x: 1.25
    BoxLayout:
        orientation: "vertical"
        size_hint_x: 5
        Label:
            text: "[b]%s[/b]" % root.achievement.name
            text_size: self.size
            markup: True
            size_hint: (1, .5)
        Label:
            text: root.achievement.description
            text_size: self.size
            valign: "top"
    CardDisplay:
        color: root.get_shading(root.earned)
        card: root.get_card(root.earned)
        size_hint_x: 1


## Action Bar - no source ##

<ActionBar>:
    ActionView:
        use_separator: True
        ActionPrevious:
            app_icon: app.icon
            title: "RendezVous"
            on_release: app.root.switcher('home')
        ActionButton:
            text: "GAME"
            on_release: app.root.switcher('main')
        ActionButton:
            text: "Decks"
            on_release: app.root.switcher('decks')
        ActionButton:
            text: "Achievements"
            on_release: app.root.switcher('achieve')
        ActionOverflow:
            ActionButton:
                text: "Settings"
                on_release: app.root.switcher('settings')
            ActionButton:
                text: "Help"

